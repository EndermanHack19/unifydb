{% extends "base.html" %}

{% block title %}Dashboard - UnifyDB{% endblock %}

{% block content %}
<div class="card">
    <h2 class="card-title">üìä Connected Databases</h2>
    
    {% if connections %}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Host</th>
                <th>Database</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for name, db in connections.items() %}
            {% set info = db.get_info() %}
            <tr>
                <td><strong>{{ name }}</strong></td>
                <td><span class="badge badge-blue">{{ info.type }}</span></td>
                <td>{{ info.host }}:{{ info.port or '-' }}</td>
                <td>{{ info.database or '-' }}</td>
                <td>
                    {% if info.connected %}
                    <span class="badge badge-green">‚óè Connected</span>
                    {% else %}
                    <span class="badge badge-red">‚óè Disconnected</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('tables', connection_name=name) }}" class="btn">Tables</a>
                    <a href="{{ url_for('query', connection_name=name) }}" class="btn btn-success">Query</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color: #94a3b8; text-align: center; padding: 40px;">
        No database connections configured.<br>
        Add connections in your application.
    </p>
    {% endif %}
</div>

<div class="card">
    <h2 class="card-title">üöÄ Quick Start</h2>
    <pre style="background: #0f172a; padding: 20px; border-radius: 8px; overflow-x: auto;">
<code>from unifydb import Database
from unifydb.web import run_server

# Add your connections
app.config["UNIFYDB_CONNECTIONS"] = {
    "main": Database.connect("postgresql://localhost/mydb"),
    "cache": Database.connect("redis://localhost:6379/0"),
}

# Run dashboard
run_server(port=5000)</code>
    </pre>
</div>
{% endblock %}
